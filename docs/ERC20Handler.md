# ERC20Handler

*ChainSafe Systems.*

> Handles ERC20 deposits and deposit executions.

This contract is intended to be used with the Bridge contract.



## Methods

### _bridgeAddress

```solidity
function _bridgeAddress() external view returns (address)
```






#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined

### _burnList

```solidity
function _burnList(address) external view returns (bool)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bool | undefined

### _contractAddressToResourceID

```solidity
function _contractAddressToResourceID(address) external view returns (bytes32)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bytes32 | undefined

### _contractWhitelist

```solidity
function _contractWhitelist(address) external view returns (bool)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | bool | undefined

### _depositRecords

```solidity
function _depositRecords(uint32, uint64) external view returns (address _tokenAddress, uint32 _destinationChainID, bytes32 _resourceID, bytes _destinationRecipientAddress, address _depositer, uint256 _amount)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | uint32 | undefined
| _1 | uint64 | undefined

#### Returns

| Name | Type | Description |
|---|---|---|
| _tokenAddress | address | undefined
| _destinationChainID | uint32 | undefined
| _resourceID | bytes32 | undefined
| _destinationRecipientAddress | bytes | undefined
| _depositer | address | undefined
| _amount | uint256 | undefined

### _resourceIDToContractAddress

```solidity
function _resourceIDToContractAddress(bytes32) external view returns (address)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| _0 | bytes32 | undefined

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | address | undefined

### deposit

```solidity
function deposit(bytes32 resourceID, uint32 destinationChainID, uint64 depositNonce, address depositer, bytes data) external nonpayable
```

A deposit is initiatied by making a deposit in the Bridge contract.Data passed into the function should be constructed as follows: amount                      uint256     bytes   0 - 32 recipientAddress length     uint256     bytes  32 - 64 recipientAddress            bytes       bytes  64 - END

*Depending if the corresponding {tokenAddress} for the parsed {resourceID} is marked true in {_burnList}, deposited tokens will be burned, if not, they will be locked.*

#### Parameters

| Name | Type | Description |
|---|---|---|
| resourceID | bytes32 | undefined
| destinationChainID | uint32 | Chain ID of chain tokens are expected to be bridged to.
| depositNonce | uint64 | This value is generated as an ID by the Bridge contract.
| depositer | address | Address of account making the deposit in the Bridge contract.
| data | bytes | Consists of: {resourceID}, {amount}, {lenRecipientAddress}, and {recipientAddress} all padded to 32 bytes.

### executeProposal

```solidity
function executeProposal(bytes32 resourceID, bytes data) external nonpayable
```

Proposal execution should be initiated when a proposal is finalized in the Bridge contract. by a relayer on the deposit&#39;s destination chain.Data passed into the function should be constructed as follows: amount                                 uint256     bytes  0 - 32 destinationRecipientAddress length     uint256     bytes  32 - 64 destinationRecipientAddress            bytes       bytes  64 - END



#### Parameters

| Name | Type | Description |
|---|---|---|
| resourceID | bytes32 | undefined
| data | bytes | Consists of {resourceID}, {amount}, {lenDestinationRecipientAddress}, and {destinationRecipientAddress} all padded to 32 bytes.

### fundERC20

```solidity
function fundERC20(address tokenAddress, address owner, uint256 amount) external nonpayable
```

Used to transfer tokens into the safe to fund proposals.



#### Parameters

| Name | Type | Description |
|---|---|---|
| tokenAddress | address | Address of ERC20 to transfer.
| owner | address | Address of current token owner.
| amount | uint256 | Amount of tokens to transfer.

### getDepositRecord

```solidity
function getDepositRecord(uint64 depositNonce, uint8 destId) external view returns (struct ERC20Handler.DepositRecord)
```





#### Parameters

| Name | Type | Description |
|---|---|---|
| depositNonce | uint64 | This ID will have been generated by the Bridge contract.
| destId | uint8 | ID of chain deposit will be bridged to.

#### Returns

| Name | Type | Description |
|---|---|---|
| _0 | ERC20Handler.DepositRecord | DepositRecord which consists of: - _tokenAddress Address used when {deposit} was executed. - _destinationChainID ChainID deposited tokens are intended to end up on. - _resourceID ResourceID used when {deposit} was executed. - _destinationRecipientAddress Address tokens are intended to be deposited to on desitnation chain. - _depositer Address that initially called {deposit} in the Bridge contract. - _amount Amount of tokens that were deposited.

### setBurnable

```solidity
function setBurnable(address contractAddress) external nonpayable
```

First verifies {contractAddress} is whitelisted, then sets {_burnList}[{contractAddress}] to true.



#### Parameters

| Name | Type | Description |
|---|---|---|
| contractAddress | address | Address of contract to be used when making or executing deposits.

### setResource

```solidity
function setResource(bytes32 resourceID, address contractAddress) external nonpayable
```

First verifies {_resourceIDToContractAddress}[{resourceID}] and {_contractAddressToResourceID}[{contractAddress}] are not already set, then sets {_resourceIDToContractAddress} with {contractAddress}, {_contractAddressToResourceID} with {resourceID}, and {_contractWhitelist} to true for {contractAddress}.



#### Parameters

| Name | Type | Description |
|---|---|---|
| resourceID | bytes32 | ResourceID to be used when making deposits.
| contractAddress | address | Address of contract to be called when a deposit is made and a deposited is executed.

### withdraw

```solidity
function withdraw(address tokenAddress, address recipient, uint256 amount) external nonpayable
```

Used to manually release ERC20 tokens from ERC20Safe.



#### Parameters

| Name | Type | Description |
|---|---|---|
| tokenAddress | address | Address of token contract to release.
| recipient | address | Address to release tokens to.
| amount | uint256 | The amount of ERC20 tokens to release.




